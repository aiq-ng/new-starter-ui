<app-sub-header pageTitle="Create Price List" class="bg-white">

</app-sub-header>


<div class="bg-background mt-10">
<h1><strong>Recommended: </strong>Organize your price list, such as beverages, pastries, and main dishes, and grouping items accordingly.</h1>

</div>

<form (ngSubmit)="onSubmit()" #form="ngForm" class="mt-5 overflow-x-auto border rounded-sm shadow-md">
    <div class="bg-gray-300 p-4 w-full">
    <h1>Item Table</h1>
    </div>
    <table class="min-w-full table-auto divide-y max-w-full">
        <thead class="bg-gray-50">
            <tr>
                <ng-container *ngFor="let row of tableHeader">
                <th scope="col" class="p-4 text-start divide divide-gray-300">
                    <div class="flex items-center gap-x-2">
                      <span class="text-sm font-semibold uppercase tracking-wide text-gray-800 truncate">
                        {{row}}
                      </span>
                    </div>
                  </th>
                </ng-container>
            </tr>
        </thead>
   
               <tbody>
                <!-- Dynamic Rows -->
                <tr *ngFor="let item of items; let i = index" [(ngModel)]="item.unit_id">
                  <!-- Dropdown for Category -->
                  <td class="border border-gray-300 px-3 py-2">
                    <select
                      class="w-full p-2 border-2 rounded-md bg-gray-200 outline-none border-gray-300"
                      [(ngModel)]="item.item_category_id"
                      name="category"
                      (change)="item.category === 'Add New Category' ? openModal() : ''"
                    >
                      <option value="" disabled>Select Category</option>
                      <option *ngFor="let category of categories" [value]="category.id">
                        {{ category.name }}
                      </option>
                      <hr color="gray"/>
                      <option value="Add New Category" class="text-red-500">
                         Add New Category +
                      </option>
                    </select>
                  </td>


<!-- Modal -->
<div
*ngIf="isModalOpen"
class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center"
>
<div class="bg-white p-6 rounded-lg w-96">
  <h3 class="text-lg font-semibold mb-4">Add New Category</h3>
  <div class="mb-4">
    <label class="block text-gray-700">Category Name</label>
    <input
      type="text"
      class="w-full p-2 border rounded"
      [(ngModel)]="newCategory.name"
      placeholder="Enter category name"
    />
  </div>
  <div class="mb-4">
    <label class="block text-gray-700">Category Description</label>
    <input
      type="text"
      class="w-full p-2 border rounded"
      [(ngModel)]="newCategory.description"
      placeholder="Enter category description"
    />
  </div>
  <div class="flex justify-end gap-4">
    <button
      (click)="closeModal()"
      class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400"
    >
      Cancel
    </button>
    <button
      (click)="saveCategory()"
      class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600"
    >
      Save
    </button>
  </div>
  </div>
  </div>
        
                  <!-- Item Details -->
                  <td class="border border-gray-300 px-3 py-2">
                    <input
                      type="text"
                      placeholder="Enter item details"
                      class="w-full p-2 border rounded-md bg-gray-200 outline-none border-gray-300"
                      [(ngModel)]="item.item_details"
                      name="details"
                    />
                  </td>
        
                  <!-- Unit Price -->
                  <td class="border border-gray-300 px-3 py-2">
                    <input
                      type="number"
                      placeholder="â‚¦"
                      class="w-full p-2 border rounded-md bg-gray-200 outline-none border-gray-300"
                      [(ngModel)]="item.unit_price"
                      name="price"
                    />
                  </td>
        
                  <!-- Minimum Order Quantity -->
                  <td class="border border-gray-300 px-3 py-2">
                    <input
                      type="number"
                      placeholder="Pcs"
                      class="w-full p-2 border rounded-md bg-gray-200 outline-none border-gray-300"
                      [(ngModel)]="item.minimum_order"
                      name="quantity"
                    />
                  </td>
        
                  <!-- Remove Button -->
                  <!-- <td class="border border-gray-300 px-3 py-2 text-center">
                    <button
                      (click)="removeRow(i)"
                      class="text-red-500 hover:text-red-700"
                    >
                      Remove
                    </button>
                  </td> -->
                </tr>
              </tbody>
    </table>
     <!-- Add Row Button -->
  <div class="mt-10 p-4">
    <button
      (click)="addRow()"
      class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"
    >
      Add new item +
    </button>
  </div>




  <!-- Save and Cancel Buttons -->
  <div class="mt-6 flex gap-4">
    <button class=" px-4 py-2 bg-gray-300 text-black rounded hover:bg-gray-400">
      Cancel
    </button>
    <button type="submit" class=" px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">
      Save
    </button>
</div>

</form>